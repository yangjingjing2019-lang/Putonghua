<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ™®é€šè©±è²æ¯ç·´ç¿’éŠæˆ²</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #e0f7fa, #ffffff);
      color: #2c3e50;
      min-height: 100vh;
    }
    h1 {
      color: #00796b;
      font-size: 48px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    }
    .question {
      font-size: 80px;
      margin: 30px 0;
      color: #37474f;
      min-height: 120px;
      transition: all 0.5s;
    }
    .bounce {
      animation: bounce 1s infinite alternate;
    }
    @keyframes bounce {
      from { transform: translateY(0); }
      to { transform: translateY(-10px); }
    }
    .options button {
      margin: 10px;
      padding: 15px 40px;
      font-size: 28px;
      cursor: pointer;
      border: none;
      border-radius: 30px;
      background-color: #4fc3f7;
      color: #fff;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: all 0.2s;
    }
    .options button:hover {
      background-color: #0288d1;
      transform: scale(1.1);
    }
    .feedback {
      font-size: 26px;
      margin-top: 20px;
      font-weight: bold;
      min-height: 40px;
    }
    .score {
      font-size: 28px;
      margin-top: 30px;
      color: #d84315;
      font-weight: bold;
    }
    /* çµæŸç•«é¢ç‰¹åˆ¥æ¨£å¼ */
    .final-score {
      font-size: 100px;
      color: #e64a19;
      animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    @keyframes pop {
      0% { transform: scale(0); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body>
  <h1>ğŸ‰ æ™®é€šè©±è²æ¯ç·´ç¿’éŠæˆ² ğŸ‰</h1>
  <p id="sub-title" style="font-size:22px;">è«‹é¸æ“‡é€™å€‹æ¼¢å­—çš„è²æ¯ï¼</p>
  
  <div class="question bounce" id="question">åª½</div>
  <div class="options" id="options"></div>
  <div class="feedback" id="feedback"></div>
  <div class="score" id="score">ç•¶å‰å¾—åˆ†ï¼š0 åˆ†</div>

  <script>
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(type) {
      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);

      if (type === 'correct') {
        oscillator.type = 'sine';
        oscillator.frequency.setValueAtTime(523.25, audioCtx.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(880, audioCtx.currentTime + 0.1);
        gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
        oscillator.start();
        oscillator.stop(audioCtx.currentTime + 0.3);
      } else if (type === 'wrong') {
        oscillator.type = 'sawtooth';
        oscillator.frequency.setValueAtTime(200, audioCtx.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);
        gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
        oscillator.start();
        oscillator.stop(audioCtx.currentTime + 0.3);
      } else if (type === 'victory') {
        // æ…¶ç¥ç¶éŸ³
        [523.25, 659.25, 783.99, 1046.50].forEach((freq, i) => {
          const osc = audioCtx.createOscillator();
          const g = audioCtx.createGain();
          osc.connect(g); g.connect(audioCtx.destination);
          osc.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.1);
          g.gain.setValueAtTime(0.2, audioCtx.currentTime + i * 0.1);
          g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + i * 0.1 + 0.4);
          osc.start(audioCtx.currentTime + i * 0.1);
          osc.stop(audioCtx.currentTime + i * 0.1 + 0.4);
        });
      }
    }

    const questions = [
      { word: "åª½", pinyin: "mÄ", answer: "m", options: ["m", "n", "l", "r"] },
      { word: "çˆ¸", pinyin: "bÃ ", answer: "b", options: ["b", "p", "m", "f"] },
      { word: "ç‹—", pinyin: "gÇ’u", answer: "g", options: ["g", "k", "h", "zh"] },
      { word: "èŠ±", pinyin: "huÄ", answer: "h", options: ["h", "f", "sh", "x"] },
      { word: "æ›¸", pinyin: "shÅ«", answer: "sh", options: ["sh", "s", "x", "zh"] },
      { word: "é­š", pinyin: "yÃº", answer: "y", options: ["y", "w", "r", "l"] },
      { word: "é³¥", pinyin: "niÇo", answer: "n", options: ["n", "m", "l", "r"] },
      { word: "è»Š", pinyin: "chÄ“", answer: "ch", options: ["ch", "zh", "sh", "c"] },
      { word: "å±±", pinyin: "shÄn", answer: "sh", options: ["sh", "s", "x", "zh"] },
      { word: "äºº", pinyin: "rÃ©n", answer: "r", options: ["r", "l", "n", "y"] },
      { word: "å£", pinyin: "kÇ’u", answer: "k", options: ["k", "g", "h", "zh"] },
      { word: "é¦¬", pinyin: "mÇ", answer: "m", options: ["m", "n", "l", "r"] },
      { word: "é¢¨", pinyin: "fÄ“ng", answer: "f", options: ["f", "h", "sh", "s"] },
      { word: "ç‡ˆ", pinyin: "dÄ“ng", answer: "d", options: ["d", "t", "n", "l"] },
      { word: "åœŸ", pinyin: "tÇ”", answer: "t", options: ["t", "d", "n", "l"] },
      { word: "é›", pinyin: "jÄ«", answer: "j", options: ["j", "q", "x", "zh"] },
      { word: "ç«¹", pinyin: "zhÃº", answer: "zh", options: ["zh", "ch", "sh", "z"] },
      { word: "è¥¿", pinyin: "xÄ«", answer: "x", options: ["x", "sh", "s", "h"] },
      { word: "æ¢¨", pinyin: "lÃ­", answer: "l", options: ["l", "n", "r", "y"] },
      { word: "æ¡Œ", pinyin: "zhuÅ", answer: "zh", options: ["zh", "ch", "sh", "z"] }
    ];
    
    let current = 0;
    let score = 0;
    let answered = false;
    
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
    
    function showFinalResult() {
      const qElem = document.getElementById("question");
      const fElem = document.getElementById("feedback");
      const sElem = document.getElementById("score");
      const tElem = document.getElementById("sub-title");
      
      qElem.classList.remove("bounce");
      document.getElementById("options").innerHTML = "";
      tElem.textContent = "æ¸¬é©—å®Œæˆï¼";
      
      // åˆ†æ•¸è·‘åˆ†å‹•ç•«
      let displayScore = 0;
      const interval = setInterval(() => {
        if (displayScore < score) {
          displayScore += 1;
          sElem.innerHTML = `ç¸½åˆ†ï¼š<span class="final-score">${displayScore}</span> åˆ†`;
        } else {
          clearInterval(interval);
          // æ ¹æ“šåˆ†æ•¸é¡¯ç¤ºæ–‡å­—èˆ‡è²æ•ˆ
          if (score >= 60) {
            qElem.textContent = "æ­å–œä½ ï¼";
            qElem.style.color = "#ef6c00";
            fElem.textContent = "ğŸ† å¤ªæ£’äº†ï¼Œä½ è¡¨ç¾å¾—å¾ˆå‡ºè‰²ï¼";
            playSound('victory');
          } else {
            qElem.textContent = "ç¹¼çºŒåŠ æ²¹å§ï¼";
            qElem.style.color = "#546e7a";
            fElem.textContent = "ğŸ’ª å†ç·´ç¿’å¹¾æ¬¡ï¼Œä½ ä¸€å®šæœƒé€²æ­¥çš„ï¼";
            playSound('wrong'); 
          }
        }
      }, 30);
    }
    
    function loadQuestion() {
      if (current >= questions.length) {
        showFinalResult();
        return;
      }
      
      const q = questions[current];
      document.getElementById("question").textContent = q.word;
      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      let shuffledOptions = shuffle([...q.options]);
      shuffledOptions.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(opt);
        optionsDiv.appendChild(btn);
      });
      document.getElementById("feedback").textContent = "";
      answered = false;
    }
    
    function checkAnswer(selected) {
      const q = questions[current];
      if (!answered) {
        answered = true;
        if (selected === q.answer) {
          score += 5;
          document.getElementById("feedback").textContent = "âœ… æ­£ç¢ºï¼æ‹¼éŸ³ï¼š" + q.pinyin;
          document.getElementById("feedback").style.color = "#2e7d32";
          playSound('correct');
        } else {
          document.getElementById("feedback").textContent = "âŒ éŒ¯èª¤ï¼[" + q.word + "] æ˜¯ " + q.pinyin;
          document.getElementById("feedback").style.color = "#c62828";
          playSound('wrong');
        }
        document.getElementById("score").textContent = "ç•¶å‰å¾—åˆ†ï¼š" + score + " åˆ†";
        
        setTimeout(() => {
          current++;
          loadQuestion();
        }, 1500);
      }
    }
    
    loadQuestion();
  </script>
</body>
</html>
